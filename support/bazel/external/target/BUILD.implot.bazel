####################################################################################################

IMPLOT_DBG = [
    "linux/lib/libglfw3d.a",
    "linux/lib/libimplotd.a",
]

IMPLOT_OPT = [
    "linux/lib/libglfw3.a",
    "linux/lib/libimplot.a",
]

filegroup(
    name = "implot_libs",
    srcs = select({
        "@esmini//support/bazel/common:debug": IMPLOT_DBG,
        "@esmini//support/bazel/common:optimized": IMPLOT_OPT,
        "//conditions:default": IMPLOT_OPT
    }),
    visibility = ["//visibility:public"],
)

cc_library(
    name = "implot",
    srcs = [
        ":implot_libs",
    ],
    hdrs = glob([
        "linux/include/**/*.h",
    ]),
    defines = select({
        "@esmini//support/bazel/common:implot_disabled": [],
        "@esmini//support/bazel/common:implot_enabled": ["_USE_IMPLOT"],
    }),
    includes = [
        "linux/include/implot",
        "linux/include/imgui",
        "linux/include/imgui/backends",
        "linux/include/glfw",
    ],
    visibility = ["//visibility:public"],
    linkopts = [
        "-lGL",
        "-lX11",
        "-ldl",
    ],
)

####################################################################################################